---
- hosts: localhost
  tasks:
    - elb_application_lb:
        name: "{{ name }}"
        region: "{{ region }}"
        subnets: "{{ subnets }}"
        seurity_groups: "{{ security_groups }}"
        scheme: "{{ scheme }}"
        listeners:
          - Protocol: HTTP
            Port: 80
            DefaultActions:
              - Type: forward
                TargetGroupName: test
#            Certificates:
#              - CertificateArn: arn:aws:iam::12345678987:server-certificate/test.domain.com
#            SslPolicy: ELBSecurityPolicy-2015-05
            Rules:
              - Conditions:
                  - Field: path-pattern
                    Values:
                      - '/test'
                Priority: '1'
                Actions:
                  - TargetGroupName: test
                    Type: forward
        state: present
