# Create an ALB with listeners and rules
- hosts: localhost
  tasks:
    - elb_application_lb:
        Name: "{{ name }}"
        region: us-east-1
        Subnets:
          - subnet-03bec374
          - subnet-e0d163ec
        Security_groups:
          - sg-d63f74b2
          - olabode
        Scheme: internal
        listeners:
          - Protocol: HTTP 
            Port: 80 
            DefaultActions:
              - Type: forward 
                TargetGroupName: test
#            Certificates:
#              - CertificateArn: arn:aws:iam::12345678987:server-certificate/test.domain.com
#            SslPolicy: ELBSecurityPolicy-2015-05
            # Rules:
              # - Conditions:
                  # - Field: path-pattern
                    # Values: 
                      # - '/test'
                # Priority: '1'
                # Actions:
                  # - TargetGroupName: test
                    # Type: forward 
        state: present 
